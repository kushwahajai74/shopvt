import{j as e,r as c,a as Fe}from"./react-4aa54174.js";import{c as cs}from"./react-dom-e09cfd22.js";import{n as y,I as ls}from"./react-hot-toast-4b8f559b.js";import{d as us}from"./overlay-navbar-e8f9d7d6.js";import{B as ps,F as ms,a as hs,C as gs}from"./react-icons-a9a31d46.js";import{L as N,B as xs}from"./react-router-dom-9b42404d.js";import{R as se,D as js,a as fs,b as vs,c as ys,B as V,T as $,S as Cs,d as je,e as fe,f as Re,g as Ae,h as Ps,i as Ss,j as ws,k as Ns,l as bs,m as Ls,n as ke,o as Te,p as Ue,q as Is,r as $s,s as Os,t as Ds,u as Es,v as Fs,w as Rs,x as As,y as ks,z as Ts,A as Us,C as _s,E as Bs,F as Ws,G as Hs,H as qs,I as we,J as Vs,K as Ms,L as Qs,M as zs,N as Pe,O as Js,P as Gs,Q as Ks,U as Ys,V as _e,W as Be,X as We,Y as He,Z as qe,_ as Ne,$ as Ve}from"./@mui-b212ef8c.js";import{H as Xs}from"./react-helmet-6c6e6d61.js";import{u as D,a as f,P as Zs}from"./react-redux-ec63b94d.js";import{c as B,a as L,b as er}from"./@reduxjs-0a07a8be.js";import{a as I}from"./axios-f1340094.js";import"./hoist-non-react-statics-23d96a9a.js";import{j as sr}from"./react-responsive-carousel-de542c20.js";import{C as M,a as A,j as Le,O as rr,n as ar,k as w}from"./react-router-aa9b6a3a.js";import{P as tr}from"./react-js-pagination-1d00d972.js";import{C as Ie,S as $e,a as Oe}from"./country-state-city-a9e23959.js";import{u as nr,a as or,C as De,b as ir,c as dr,E as cr,l as lr}from"./@stripe-4634ae3f.js";import{L as ur,D as pr}from"./react-chartjs-2-4b3cd519.js";import{C as mr,a as hr,b as gr,P as xr,c as jr,A as fr,p as vr,d as yr,e as Cr}from"./chart.js-d7a07742.js";import"./@babel-91e59e1e.js";import"./scheduler-765c72db.js";import"./goober-70b4b9ca.js";import"./core-js-93fdab4a.js";import"./regenerator-runtime-c37195a3.js";import"./@remix-run-b4e89633.js";import"./clsx-1229b3e0.js";import"./react-transition-group-33fc80b7.js";import"./prop-types-c43052af.js";import"./reselect-36a88051.js";import"./@emotion-d4ceb993.js";import"./stylis-79144faa.js";import"./@popperjs-f3391c26.js";import"./react-side-effect-f84e9505.js";import"./react-fast-compare-f62d1d00.js";import"./object-assign-078dd693.js";import"./use-sync-external-store-36a8b5eb.js";import"./immer-41fd5235.js";import"./redux-cb020601.js";import"./redux-thunk-ef899f4c.js";import"./react-is-e8e5dbb3.js";import"./react-easy-swipe-8dc11964.js";import"./classnames-63c61219.js";import"./paginator-d03ab769.js";import"./@kurkle-b1b89bbc.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&t(d)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();const Me="/assets/logo2-da540b4b.png",Pr={burgerColorHover:"#eb4034",logo:Me,logoWidth:"28vmax",navColor1:"rgba(255, 255, 255, 0.95)",logoHoverSize:"10px",logoHoverColor:"eb4034",link1Text:"Home",link2Text:"Products",link3Text:"Contact",link4Text:"About",link1Url:"/",link2Url:"/products",link3Url:"/contact",link4Url:"/about",link1Size:"1.8vmax",link1Color:"rgba(35, 35, 35,0.8)",nav1justifyContent:"center",nav2justifyContent:"space-between",nav3justifyContent:"space-between",nav4justifyContent:"space-evenly",nav1Transition:.3,link1AnimationTime:.1,searchIconAnimationTime:.7,link1ColorHover:"#eb4034",link1Margin:"2vmax",profileIconUrl:"/login",searchIconUrl:"/search",cartIconUrl:"/cart",searchIcon:!0,SearchIconElement:ps,cartIcon:!0,CartIconElement:ms,profileIcon:!0,ProfileIconElement:hs,profileIconColor:"rgba(35, 35, 35,0.8)",searchIconColor:"rgba(35, 35, 35,0.8)",cartIconColor:"rgba(35, 35, 35,0.8)",profileIconColorHover:"#eb4034",searchIconColorHover:"#eb4034",cartIconColorHover:"#eb4034",cartIconMargin:"1vmax"},Sr=()=>e.jsx(us.ReactNavbar,{...Pr}),wr="/assets/playstore-251405bd.png",Nr="/assets/Appstore-94e90989.png";const br=()=>e.jsxs("footer",{id:"footer",children:[e.jsxs("div",{className:"leftFooter",children:[e.jsx("h4",{children:"DOWNLOAD OUR APP"}),e.jsx("p",{children:"Download App for Android and IOS mobile phone"}),e.jsx("img",{src:wr,alt:"playstore"}),e.jsx("img",{src:Nr,alt:"appstore"})]}),e.jsxs("div",{className:"midFooter",children:[e.jsx("h1",{children:"shopEkart"}),e.jsx("p",{children:"High Quality is our priority"}),e.jsx("p",{children:"Copyrights 2023 © Jai Kushwaha"})]}),e.jsxs("div",{className:"rightFooter",children:[e.jsx("h4",{children:"Follow Us"}),e.jsx("a",{target:"#",href:"https://www.instagram.com/jaikushwaha_",children:"Instagram"}),e.jsx("a",{target:"#",href:"https://linkedin.com/in/kushwahajai74",children:"LinkedIn"}),e.jsx("a",{target:"#",href:"https://twitter.com/kushwahajai74",children:"Twitter"})]})]});const Qe=({product:a})=>{const s={size:"small",value:a.ratings,readOnly:!0,precision:.5};return e.jsxs(N,{className:"productCard",to:`/product/${a._id}`,children:[e.jsx("img",{src:a.images[0].url,alt:a.name}),e.jsx("p",{children:a.name.substring(0,50)}),e.jsxs("div",{children:[e.jsx(se,{...s}),e.jsxs("span",{children:["(",a.numberOfReviews," Reviews)"]})]}),e.jsxs("span",{children:["₹",`${a.price}`]})]})},E=({title:a})=>e.jsx(Xs,{children:e.jsx("title",{children:a})}),Lr={products:[],isLoading:!0,error:null,productsCount:null,resultPerPage:null,filteredProductsCount:null},ze=B({name:"products",initialState:Lr,reducers:{clearErrors:a=>{a.error=null}},extraReducers:a=>{a.addCase(J.pending,s=>{s.isLoading=!0}).addCase(J.fulfilled,(s,r)=>{s.products=r.payload.products,s.resultPerPage=r.payload.resultPerPage,s.productsCount=r.payload.productsCount,s.filteredProductsCount=r.payload.filteredProductsCount,s.isLoading=!1}).addCase(J.rejected,(s,r)=>{console.log(r.payload),s.error=r.payload,s.isLoading=!1}).addCase(G.pending,s=>{s.isLoading=!0}).addCase(G.fulfilled,(s,r)=>{s.products=r.payload.products,s.isLoading=!1}).addCase(G.rejected,(s,r)=>{console.log(r.payload),s.error=r.payload,s.isLoading=!1})}}),J=L("products/getProducts",async({keyword:a="",currentPage:s=1,price:r=[0,15e4],category:t,ratings:n=0},o)=>{try{let d=`/api/v1/products?keyword=${a}&page=${s}&price[gte]=${r[0]}&price[lte]=${r[1]}&ratings[gte]=${n}`;return t&&(d=`/api/v1/products?keyword=${a}&page=${s}&price[gte]=${r[0]}&price[lte]=${r[1]}&category=${t}&ratings[gte]=${n}`),(await I(d)).data}catch(d){return o.rejectWithValue(d.response.data.message?d.response.data.message:d.message)}}),G=L("adminProducts/getProducts",async a=>{try{return(await I.get("/api/v1/admin/products")).data}catch(s){return a.rejectWithValue(s.response.data.message?s.response.data.message:s.message)}}),{clearErrors:ve}=ze.actions,Ir=ze.reducer;const T=()=>e.jsx("div",{className:"loading",children:e.jsx("div",{})}),$r=()=>{const a=D(),{products:s,isLoading:r,error:t,productsCount:n}=f(o=>o.products);return c.useEffect(()=>{a(J({}))},[a]),c.useEffect(()=>{t&&(y.error(t),a(ve()))},[a,t]),e.jsx(e.Fragment,{children:r?e.jsx(T,{}):e.jsxs(e.Fragment,{children:[e.jsx(E,{title:"shopEkart"}),e.jsxs("div",{className:"banner",children:[e.jsx("p",{children:"Welcome to shopEkart"}),e.jsx("h1",{children:"FIND AMAZING PRODUCTS BELOW"}),e.jsx("a",{href:"#container",children:e.jsxs("button",{children:["Scroll ",e.jsx(gs,{})]})})]}),e.jsx("h2",{className:"homeHeading",children:"Featured Products"}),e.jsx("div",{className:"container",id:"container",children:s==null?void 0:s.map(o=>e.jsx(Qe,{product:o},o._id))})]})})};const Or={product:[],isLoading:!0,error:null},Je=B({name:"product",initialState:Or,reducers:{clearErrors:a=>{a.error=null}},extraReducers:a=>{a.addCase(K.pending,s=>{s.isLoading=!0}).addCase(K.fulfilled,(s,r)=>{s.product=r.payload.product,s.isLoading=!1}).addCase(K.rejected,(s,r)=>{console.log(r.payload),s.error=r.payload,s.isLoading=!1})}}),K=L("product/getProductDetails",async(a,s)=>{try{return(await I(`/api/v1/product/${a}`)).data}catch(r){return s.rejectWithValue(r.response.data.message?r.response.data.message:r.message)}}),{clearErrors:Dr}=Je.actions,Er=Je.reducer,Fr="/assets/Profile-36adaae0.png",Rr=({review:a})=>{const s={value:a.rating,readOnly:!0,precision:.5};return e.jsxs("div",{className:"reviewCard",children:[e.jsx("img",{src:Fr,alt:"User"}),e.jsx("p",{children:a.name}),e.jsx(se,{...s}),e.jsx("span",{className:"reviewCardComment",children:a.comment})]})},Ar={cartItems:localStorage.getItem("cartItems")?JSON.parse(localStorage.getItem("cartItems")):[],shippingInfo:localStorage.getItem("shippingInfo")?JSON.parse(localStorage.getItem("shippingInfo")):{}},Ge=B({name:"cart",initialState:Ar,reducers:{removalFromCart:(a,s)=>{a.cartItems=a.cartItems.filter(r=>r.product!==s.payload)},savingShipingInfo:(a,s)=>{a.shippingInfo=s.payload}},extraReducers:a=>{a.addCase(re.fulfilled,(s,r)=>{const t=r.payload,n=s.cartItems.find(o=>o.product===t.product);n?s.cartItems=s.cartItems.map(o=>o.product===n.product?t:o):s.cartItems=[...s.cartItems,t]})}}),re=L("cart/addToCart",async({id:a,quantity:s},r)=>{try{const{data:t}=await I(`/api/v1/product/${a}`),n={product:t.product._id,name:t.product.name,price:t.product.price,image:t.product.images[0].url,stock:t.product.Stock,quantity:s};r.dispatch(re.fulfilled(n)),localStorage.setItem("cartItems",JSON.stringify(r.getState().cart.cartItems))}catch(t){return r.rejectWithValue(t.response.data.message?t.response.data.message:t.message)}}),kr=L("cart/removeFromCart",async(a,s)=>{try{s.dispatch(Ur(a)),localStorage.setItem("cartItems",JSON.stringify(s.getState().cart.cartItems))}catch(r){return s.rejectWithValue(r.response.data.message?r.response.data.message:r.message)}}),Tr=L("cart/saveShippingInfo",async(a,s)=>{try{s.dispatch(_r(a)),localStorage.setItem("shippingInfo",JSON.stringify(s.getState().cart.shippingInfo))}catch(r){return s.rejectWithValue(r.response.data.message?r.response.data.message:r.message)}}),{removalFromCart:Ur,savingShipingInfo:_r}=Ge.actions,Br=Ge.reducer,Wr={success:null,isLoading:!0,error:null},Ke=B({name:"review",initialState:Wr,reducers:{clearErrors:a=>{a.error=null},newReviewReset:a=>{a.success=null,a.isLoading=!1}},extraReducers:a=>{a.addCase(ae.pending,s=>{s.isLoading=!0}).addCase(ae.fulfilled,(s,r)=>{s.success=r.payload,s.isLoading=!1}).addCase(ae.rejected,(s,r)=>{console.log(r.payload),s.error=r.payload,s.isLoading=!1})}}),ae=L("product/newReview",async(a,s)=>{try{console.log(a);const r={headers:{"Content-Type":"application/json"}},{data:t}=await I.put("/api/v1/review",a,r);return t.success}catch(r){return s.rejectWithValue(r.response.data.message?r.response.data.message:r.message)}}),{clearErrors:Hr,newReviewReset:qr}=Ke.actions,Vr=Ke.reducer,Mr=()=>{var C;const a=D(),{id:s}=M(),{product:r,isLoading:t,error:n}=f(g=>g.productDetails),{success:o,error:d}=f(g=>g.newReview),[i,m]=c.useState(!1),[l,u]=c.useState(0),[j,v]=c.useState(""),[h,P]=c.useState(1),F=()=>{if(h>=r.Stock)return;const g=h+1;P(g)},p=()=>{if(h<=1)return;const g=h-1;P(g)},S=()=>{y.success("Item Added to Cart"),a(re({id:s,quantity:h}))},R=()=>{m(!i)},O=()=>{const g=new FormData;g.set("rating",l),g.set("comment",j),g.set("productId",s),a(ae(g)),m(!1)};c.useEffect(()=>{o&&(y.success("Review Submitted Successfully"),a(qr())),a(K(s))},[a,s,o]),c.useEffect(()=>{n&&(y.error(n),a(Dr())),d&&(y.error(d),a(Hr()))},[a,n,d]);const U={size:"large",value:r.ratings,readOnly:!0,precision:.5},q={centerMode:!0,showThumbs:!1,showArrows:!0,width:380,centerSlidePercentage:100,autoPlay:!0,interval:7e3,infiniteLoop:!0,showStatus:!1};return e.jsx(e.Fragment,{children:t?e.jsx(T,{}):e.jsxs(e.Fragment,{children:[e.jsx(E,{title:`${r.name} -- ShopEkart`}),e.jsxs("div",{className:"ProductDetails",children:[e.jsx("div",{children:e.jsx(sr.Carousel,{...q,children:(C=r==null?void 0:r.images)==null?void 0:C.map((g,_)=>e.jsx("img",{className:"CarouselImage",src:g.url,alt:`${_} Slide`},_))})}),e.jsxs("div",{children:[e.jsxs("div",{className:"detailsBlock-1",children:[e.jsx("h2",{children:r.name}),e.jsxs("p",{children:["Product #",r._id]})]}),e.jsxs("div",{className:"detailsBlock-2",children:[e.jsx(se,{...U}),e.jsxs("span",{className:"detailsBlock-2-span",children:["(",r.numberOfReviews," Reviews)"]})]}),e.jsxs("div",{className:"detailsBlock-3",children:[e.jsx("h1",{children:`₹${r.price}`}),e.jsxs("div",{className:"detailsBlock-3-1",children:[e.jsxs("div",{className:"detailsBlock-3-1-1",children:[e.jsx("button",{onClick:p,children:"-"}),e.jsx("input",{value:h,readOnly:!0,type:"number"}),e.jsx("button",{onClick:F,children:"+"})]}),e.jsx("button",{onClick:S,disabled:r.Stock<1,children:"Add to Cart"})]}),e.jsxs("p",{children:["Status:",e.jsx("b",{className:r.Stock<1?"redColor":"greenColor",children:r.Stock<1?"OutOfStock":"InStock"})]})]}),e.jsxs("div",{className:"detailsBlock-4",children:["Description : ",e.jsx("p",{children:r.description})]}),e.jsx("button",{onClick:R,className:"submitReview",children:"Submit Review"})]})]}),e.jsx("h3",{className:"reviewsHeading",children:"REVIEWS"}),e.jsxs(js,{"aria-labelledby":"simple-dialog-title",open:i,onClose:R,children:[e.jsx(fs,{children:"Submit Review"}),e.jsxs(vs,{className:"submitDialog",children:[e.jsx(se,{onChange:g=>u(g.target.value),value:Number(l),size:"large"}),e.jsx("textarea",{className:"submitDialogTextArea",cols:"30",rows:"5",value:j,onChange:g=>v(g.target.value)})]}),e.jsxs(ys,{children:[e.jsx(V,{onClick:R,color:"secondary",children:"Cancel"}),e.jsx(V,{onClick:O,color:"primary",children:"Submit"})]})]}),r.reviews&&r.reviews[0]?e.jsx("div",{className:"reviews",children:r.reviews&&r.reviews.map(g=>e.jsx(Rr,{review:g},g._id))}):e.jsx("p",{className:"noReviews",children:"No Reviews Yet"})]})})};const Qr=["Laptop","Footwear","Tshirts","Headphones","Attire","Camera","SmartPhones"],Ee=()=>{const a=D(),[s,r]=c.useState(1),[t,n]=c.useState([0,15e4]),[o,d]=c.useState(""),[i,m]=c.useState(0),{products:l,isLoading:u,error:j,productsCount:v,resultPerPage:h,filteredProductsCount:P}=f(O=>O.products),{keyword:F}=M(),p=O=>{r(O)},S=(O,U)=>{n(U)};c.useEffect(()=>{a(J({keyword:F,currentPage:s,price:t,category:o,ratings:i}))},[a,F,s,t,o,i]),c.useEffect(()=>{j&&(y.error(j),a(ve()))},[a,j]);const R=P;return e.jsx(e.Fragment,{children:u?e.jsx(T,{}):e.jsxs(e.Fragment,{children:[e.jsx(E,{title:"PRODUCTS -- ShopEkart"}),e.jsx("h2",{className:"productsHeading",children:"Products"}),e.jsx("div",{className:"products",children:l&&l.map(O=>e.jsx(Qe,{product:O},O._id))}),e.jsxs("div",{className:"filterBox",children:[e.jsx($,{children:"Prices"}),e.jsx(Cs,{getAriaLabel:()=>"Temperature range",value:t,onChange:S,valueLabelDisplay:"auto",min:0,max:15e4}),e.jsx($,{sx:{paddingTop:"1vmax"},children:"Categories"}),e.jsx("ul",{className:"categoryBox",children:Qr.map(O=>e.jsx("li",{className:"category-link",onClick:()=>d(O),children:O},O))}),e.jsx($,{sx:{paddingTop:"1vmax"},children:"Ratings Above"}),e.jsx(se,{name:"simple-controlled",value:i,onChange:(O,U)=>{m(U)},size:"small"})]}),h<R&&e.jsx("div",{className:"paginationBox",children:e.jsx(tr,{activePage:s,itemsCountPerPage:h,totalItemsCount:v,onChange:p,nextPageText:"Next",prevPageText:"Prev",firstPageText:"1st",lastPageText:"Last",itemClass:"page-item",linkClass:"page-link",activeClass:"pageItemActive",activeLinkClass:"pageLinkActive"})})]})})};const zr=({history:a})=>{let s=A();const[r,t]=c.useState(""),n=o=>{o.preventDefault(),r.trim()?s(`/products/${r}`):s("/products")};return e.jsxs(e.Fragment,{children:[e.jsx(E,{title:"SEACRCH -- ShopEkart"}),e.jsxs("form",{action:"",className:"searchBox",onSubmit:n,children:[e.jsx("input",{type:"text",placeholder:"Search a Product...",onChange:o=>t(o.target.value)}),e.jsx("input",{type:"submit",value:"search"})]})]})};const Jr={user:null,isLoading:null,isAuthenticated:!1,error:null},Ye=B({name:"user",initialState:Jr,reducers:{clearErrors:a=>{a.error=null}},extraReducers:a=>{a.addCase(te.pending,s=>{s.isLoading=!0}).addCase(te.fulfilled,(s,r)=>{s.user=r.payload.user,s.isAuthenticated=!0,s.isLoading=!1}).addCase(te.rejected,(s,r)=>{console.log(r.payload),s.error=r.payload,s.user=null,s.isAuthenticated=!1,s.isLoading=!1}).addCase(ne.pending,s=>{s.isLoading=!0}).addCase(ne.fulfilled,(s,r)=>{s.user=r.payload.user,s.isAuthenticated=!0,s.isLoading=!1}).addCase(ne.rejected,(s,r)=>{console.log(r.payload),s.error=r.payload,s.user=null,s.isAuthenticated=!1,s.isLoading=!1}).addCase(Y.pending,s=>{s.isLoading=!0}).addCase(Y.fulfilled,(s,r)=>{s.user=r.payload.user,s.isAuthenticated=!0,s.isLoading=!1}).addCase(Y.rejected,(s,r)=>{console.log(r.payload),s.error=r.payload,s.user=null,s.isAuthenticated=!1,s.isLoading=!1}).addCase(oe.pending,s=>{s.isLoading=!0}).addCase(oe.fulfilled,(s,r)=>{s.user=null,s.isAuthenticated=!1,s.isLoading=!1}).addCase(oe.rejected,(s,r)=>{console.log(r.payload),s.error=r.payload,s.isLoading=!1})}}),te=L("user/login",async({email:a,password:s},r)=>{try{const t={headers:{"Content-Type":"application/json"}},{data:n}=await I.post("/api/v1/login",{email:a,password:s},t);return n}catch(t){return r.rejectWithValue(t.response.data.message?t.response.data.message:t.message)}}),ne=L("user/register",async(a,s)=>{try{const r={headers:{"Content-Type":"multipart/form-data"}},{data:t}=await I.post("/api/v1/register",a,r);return t}catch(r){return s.rejectWithValue(r.response.data.message?r.response.data.message:r.message)}}),Y=L("user/loadUser",async a=>{try{const{data:s}=await I.get("/api/v1/me");return s}catch(s){return a.rejectWithValue(s.response.data.message?s.response.data.message:s.message)}}),oe=L("user/logout",async a=>{try{await I.get("/api/v1/logout");return}catch(s){return a.rejectWithValue(s.response.data.message?s.response.data.message:s.message)}}),{clearErrors:Gr}=Ye.actions,Kr=Ye.reducer,Yr=()=>{const a=D();let s=A();const{isLoading:r,error:t,isAuthenticated:n}=f(b=>b.user),o=c.useRef(null),d=c.useRef(null),i=c.useRef(null),[m,l]=c.useState(""),[u,j]=c.useState(""),[v,h]=c.useState({name:"",email:"",password:""}),{name:P,email:F,password:p}=v,[S,R]=c.useState(),[O,U]=c.useState("./Profile.png"),q=b=>{b.preventDefault(),a(te({email:m,password:u}))},C=b=>{b.preventDefault();const x=new FormData;x.set("name",P),x.set("email",F),x.set("password",p),x.set("avatar",S),a(ne(x))},g=b=>{if(b.target.name==="avatar"){const x=new FileReader;x.onload=()=>{x.readyState===2&&(U(x.result),R(x.result))},x.readAsDataURL(b.target.files[0])}else h({...v,[b.target.name]:b.target.value})},_=location.search?location.search.split("=")[1]:"account";c.useEffect(()=>{t&&(y.error(t),a(Gr())),n===!0&&s(`/${_}`)},[a,t,s,n,_]);const W=(b,x)=>{x==="login"&&(d.current.classList.add("shiftToNeutral"),d.current.classList.remove("shiftToRight"),i.current.classList.remove("shiftToNeutralForm"),o.current.classList.remove("shiftToLeft")),x==="register"&&(d.current.classList.add("shiftToRight"),d.current.classList.remove("shiftToNeutral"),i.current.classList.add("shiftToNeutralForm"),o.current.classList.add("shiftToLeft"))};return e.jsx(e.Fragment,{children:r?e.jsx(T,{}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"LoginSignUpContainer",children:e.jsxs("div",{className:"LoginSignUpBox",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"login_signUp_toggle",children:[e.jsx("p",{onClick:b=>W(b,"login"),children:"LOGIN"}),e.jsx("p",{onClick:b=>W(b,"register"),children:"REGISTER"})]}),e.jsx("button",{ref:d})]}),e.jsxs("form",{ref:o,onSubmit:q,className:"loginForm",children:[e.jsxs("div",{className:"loginEmail",children:[e.jsx(je,{}),e.jsx("input",{type:"email",placeholder:"Email",value:m,required:!0,onChange:b=>l(b.target.value)})]}),e.jsxs("div",{className:"loginPassword",children:[e.jsx(fe,{}),e.jsx("input",{type:"password",placeholder:"Password",value:u,required:!0,onChange:b=>j(b.target.value)})]}),e.jsx(N,{to:"/password/forgot",children:"Forget Password?"}),e.jsx("input",{type:"submit",value:"Login",className:"loginBtn"})]}),e.jsxs("form",{className:"signUpForm",ref:i,encType:"multipart/form-data",onSubmit:C,children:[e.jsxs("div",{className:"signUpName",children:[e.jsx(Re,{}),e.jsx("input",{type:"text",placeholder:"Name",required:!0,name:"name",value:P,onChange:g})]}),e.jsxs("div",{className:"signUpEmail",children:[e.jsx(je,{}),e.jsx("input",{type:"email",placeholder:"Email",required:!0,name:"email",value:F,onChange:g})]}),e.jsxs("div",{className:"signUpPassword",children:[e.jsx(fe,{}),e.jsx("input",{type:"password",placeholder:"Password",required:!0,name:"password",value:p,onChange:g})]}),e.jsxs("div",{id:"registerImage",children:[e.jsx("img",{src:O,alt:"Avatar Preview"}),e.jsx("input",{type:"file",name:"avatar",accept:"image/*",onChange:g})]}),e.jsx("input",{type:"submit",value:"Register",className:"signUpBtn"})]})]})})})})};const Xr=()=>{const a=A(),{isAuthenticated:s,user:r,isLoading:t}=f(n=>n.user);return c.useEffect(()=>{s===!1&&a("/login")},[s,a]),e.jsx(e.Fragment,{children:t?e.jsx(T,{}):e.jsxs(e.Fragment,{children:[e.jsx(E,{title:`${r.name}'s Profile`}),e.jsxs("div",{className:"profileContainer",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"My Profile"}),e.jsx("img",{src:r.avatar.url,alt:r.name}),e.jsx(N,{to:"/me/update",children:"Edit Profile"})]}),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("h4",{children:"Full Name"}),e.jsx("p",{children:r.name})]}),e.jsxs("div",{children:[e.jsx("h4",{children:"Email"}),e.jsx("p",{children:r.email})]}),e.jsxs("div",{children:[e.jsx("h4",{children:"Joined On"}),e.jsx("p",{children:String(r.createdAt).substr(0,10)})]}),e.jsxs("div",{children:[e.jsx(N,{to:"/orders",children:"My Orders"}),e.jsx(N,{to:"/password/update",children:"Change Password"})]})]})]})]})})};const Zr=({user:a})=>{const s=D(),r=A(),{cartItems:t}=f(P=>P.cart),[n,o]=Fe.useState(!1),d=()=>o(!0),i=()=>o(!1),m=[{icon:e.jsx(Ae,{}),name:"Orders",func:j},{icon:e.jsx(Ps,{sx:{color:t.length>0?"tomato":"unset"}}),name:`Cart(${t.length})`,func:u},{icon:e.jsx(Ss,{}),name:"Profile",func:h},{icon:e.jsx(ws,{}),name:"Logout",func:v}];a.role==="admin"&&m.unshift({icon:e.jsx(ke,{}),name:"Dashboard",func:l});function l(){r("/admin/dashboard")}function u(){r("/cart")}function j(){r("/orders")}function v(){s(oe()),y.success("Logout successfully")}function h(){r("/account")}return e.jsxs(e.Fragment,{children:[e.jsx(Ns,{open:n}),e.jsx(bs,{sx:{zIndex:"11"},className:"speedDial",ariaLabel:"SpeedDial controlled open example",icon:e.jsx("img",{className:"speedDialIcon",src:a.avatar.url,alt:"Profile"}),onClose:i,onOpen:d,open:n,direction:"down",children:m.map(P=>e.jsx(Ls,{icon:P.icon,tooltipTitle:P.name,onClick:P.func,tooltipOpen:window.innerWidth<=600},P.name))})]})},H=({children:a,isAdmin:s})=>{const{isAuthenticated:r,isLoading:t,user:n}=f(o=>o.user);if(t===!1)return r===!1?e.jsx(Le,{to:"/login"}):s==!0&&n.role!=="admin"?e.jsx(Le,{to:"/login"}):a||e.jsx(rr,{})};const ea={isLoading:!1,isUpdated:!1,error:null},Xe=B({name:"user",initialState:ea,reducers:{clearErrors:a=>{a.error=null},updateReset:a=>{a.isUpdated=!1,a.isLoading=!1}},extraReducers:a=>{a.addCase(ie.pending,s=>{s.isLoading=!0}).addCase(ie.fulfilled,(s,r)=>{s.isUpdated=r.payload.success,s.isLoading=!1}).addCase(ie.rejected,(s,r)=>{console.log(r.payload),s.error=r.payload,s.isLoading=!1}).addCase(de.pending,s=>{s.isLoading=!0}).addCase(de.fulfilled,(s,r)=>{s.isUpdated=r.payload.success,s.isLoading=!1}).addCase(de.rejected,(s,r)=>{console.log(r.payload),s.error=r.payload,s.isLoading=!1})}}),ie=L("profile/updateUser",async({myForm:a},s)=>{try{const r={headers:{"Content-Type":"multipart/form-data"}},{data:t}=await I.put("/api/v1/me/update",a,r);return t}catch(r){return s.rejectWithValue(r.response.data.message?r.response.data.message:r.message)}}),de=L("profile/updatePassword",async({myForm:a},s)=>{try{const r={headers:{"Content-Type":"application/json"}},{data:t}=await I.put("/api/v1/password/update",a,r);return t}catch(r){return s.rejectWithValue(r.response.data.message?r.response.data.message:r.message)}}),{clearErrors:Ze,updateReset:es}=Xe.actions,sa=Xe.reducer,ra=()=>{const a=D();let s=A();const{user:r}=f(p=>p.user),{error:t,isUpdated:n,isLoading:o}=f(p=>p.profile),[d,i]=c.useState(),[m,l]=c.useState(),[u,j]=c.useState(),[v,h]=c.useState("./Profile.png"),P=p=>{p.preventDefault();const S=new FormData;S.set("name",d),S.set("email",m),S.set("avatar",u),a(ie({myForm:S}))},F=p=>{if(p.target.name==="avatar"){const S=new FileReader;S.onload=()=>{S.readyState===2&&(h(S.result),j(S.result))},S.readAsDataURL(p.target.files[0])}};return c.useEffect(()=>{r&&(i(r.name),l(r.email),h(r.avatar.url)),t&&(y.error(t),a(Ze())),n&&(a(Y()),y.success("Profile Updated Successfully"),s("/account"),a(es()))},[a,t,s,n,r]),e.jsx(e.Fragment,{children:o?e.jsx(T,{}):e.jsxs(e.Fragment,{children:[e.jsx(E,{title:"Update Profile"}),e.jsx("div",{className:"updateProfileContainer",children:e.jsxs("div",{className:"updateProfileBox",children:[e.jsx("h2",{className:"updateProfileHeading",children:"Update Profile"}),e.jsxs("form",{className:"updateProfileForm",encType:"multipart/form-data",onSubmit:P,children:[e.jsxs("div",{className:"signUpName",children:[e.jsx(Re,{}),e.jsx("input",{type:"text",placeholder:"Name",required:!0,name:"name",value:d,onChange:p=>i(p.target.value)})]}),e.jsxs("div",{className:"signUpEmail",children:[e.jsx(je,{}),e.jsx("input",{type:"email",placeholder:"Email",required:!0,name:"email",value:m,onChange:p=>l(p.target.value)})]}),e.jsxs("div",{id:"updateProfileImage",children:[e.jsx("img",{src:v,alt:"Avatar Preview"}),e.jsx("input",{type:"file",name:"avatar",accept:"image/*",onChange:F})]}),e.jsx("input",{type:"submit",value:"Update",className:"updateProfileBtn"})]})]})})]})})};const aa=()=>{const a=D();let s=A();const{error:r,isUpdated:t,isLoading:n}=f(v=>v.profile),[o,d]=c.useState(""),[i,m]=c.useState(""),[l,u]=c.useState(""),j=v=>{v.preventDefault();const h=new FormData;h.set("oldPassword",o),h.set("newPassword",i),h.set("confirmPassword",l),a(de({myForm:h}))};return c.useEffect(()=>{r&&(y.error(r),a(Ze())),t&&(y.success("Password Changed Successfully"),s("/account"),a(es()))},[a,r,s,t]),e.jsx(e.Fragment,{children:n?e.jsx(T,{}):e.jsxs(e.Fragment,{children:[e.jsx(E,{title:"Change Password"}),e.jsx("div",{className:"updatePasswordContainer",children:e.jsxs("div",{className:"updatePasswordBox",children:[e.jsx("h2",{className:"updatePasswordHeading",children:"Update Profile"}),e.jsxs("form",{className:"updatePasswordForm",onSubmit:j,children:[e.jsxs("div",{className:"loginPassword",children:[e.jsx(Te,{}),e.jsx("input",{type:"password",placeholder:"Old Password",required:!0,value:o,onChange:v=>d(v.target.value)})]}),e.jsxs("div",{className:"loginPassword",children:[e.jsx(fe,{}),e.jsx("input",{type:"password",placeholder:"New Password",required:!0,value:i,onChange:v=>m(v.target.value)})]}),e.jsxs("div",{className:"loginPassword",children:[e.jsx(Ue,{}),e.jsx("input",{type:"password",placeholder:"Confirm Password",required:!0,value:l,onChange:v=>u(v.target.value)})]}),e.jsx("input",{type:"submit",value:"Change",className:"updatePasswordBtn"})]})]})})]})})};const ta={isLoading:!1,message:null,error:null,success:!1},ss=B({name:"forgotpassword",initialState:ta,reducers:{clearErrors:a=>{a.error=null},forgotReset:a=>{a.message=null}},extraReducers:a=>{a.addCase(ce.pending,s=>{s.isLoading=!0}).addCase(ce.fulfilled,(s,r)=>{s.message=r.payload.message,s.isLoading=!1}).addCase(ce.rejected,(s,r)=>{console.log(r.payload),s.error=r.payload,s.isLoading=!1}).addCase(le.pending,s=>{s.isLoading=!0}).addCase(le.fulfilled,(s,r)=>{s.success=r.payload.success,s.isLoading=!1}).addCase(le.rejected,(s,r)=>{console.log(r.payload),s.error=r.payload,s.isLoading=!1})}}),ce=L("user/forgotPassword",async(a,s)=>{try{const r={headers:{"Content-Type":"application/json"}},{data:t}=await I.post("/api/v1/password/forgot",{email:a},r);return t}catch(r){return s.rejectWithValue(r.response.data.message?r.response.data.message:r.message)}}),le=L("user/resetPassword",async({token:a,myForm:s},r)=>{try{const t={headers:{"Content-Type":"application/json"}},{data:n}=await I.put(`/api/v1/password/reset/${a}`,s,t);return n}catch(t){return r.rejectWithValue(t.response.data.message?t.response.data.message:t.message)}}),{clearErrors:rs,forgotReset:na}=ss.actions,oa=ss.reducer,ia=()=>{const a=D(),{error:s,message:r,isLoading:t}=f(i=>i.forgotPassword),[n,o]=c.useState(""),d=i=>{i.preventDefault(),a(ce(n))};return c.useEffect(()=>{s&&(y.error(s),a(rs())),r&&(y.success(r),a(na()))},[a,s,r]),e.jsx(e.Fragment,{children:t?e.jsx(T,{}):e.jsxs(e.Fragment,{children:[e.jsx(E,{title:"Forgot Password"}),e.jsx("div",{className:"forgotPasswordContainer",children:e.jsxs("div",{className:"forgotPasswordBox",children:[e.jsx("h2",{className:"forgotPasswordHeading",children:"Forgot Password"}),e.jsxs("form",{className:"forgotPasswordForm",onSubmit:d,children:[e.jsxs("div",{className:"forgotPasswordEmail",children:[e.jsx(je,{}),e.jsx("input",{type:"email",placeholder:"Email",required:!0,name:"email",value:n,onChange:i=>o(i.target.value)})]}),e.jsx("input",{type:"submit",value:"Send",className:"forgotPasswordBtn"})]})]})})]})})};const da=()=>{const{token:a}=M(),s=D();let r=A();const{error:t,success:n,isLoading:o}=f(j=>j.forgotPassword),[d,i]=c.useState(""),[m,l]=c.useState(""),u=j=>{j.preventDefault();const v=new FormData;v.set("password",d),v.set("confirmPassword",m),s(le({token:a,myForm:v}))};return c.useEffect(()=>{t&&(y.error(t),s(rs())),n&&(y.success("Password Updated Successfully"),r("/login"))},[s,t,n,r]),e.jsx(e.Fragment,{children:o?e.jsx(T,{}):e.jsxs(e.Fragment,{children:[e.jsx(E,{title:"Change Password"}),e.jsx("div",{className:"resetPasswordContainer",children:e.jsxs("div",{className:"resetPasswordBox",children:[e.jsx("h2",{className:"resetPasswordHeading",children:"Update Profile"}),e.jsxs("form",{className:"resetPasswordForm",onSubmit:u,children:[e.jsxs("div",{children:[e.jsx(fe,{}),e.jsx("input",{type:"password",placeholder:"New Password",required:!0,value:d,onChange:j=>i(j.target.value)})]}),e.jsxs("div",{className:"loginPassword",children:[e.jsx(Ue,{}),e.jsx("input",{type:"password",placeholder:"Confirm Password",required:!0,value:m,onChange:j=>l(j.target.value)})]}),e.jsx("input",{type:"submit",value:"Update",className:"resetPasswordBtn"})]})]})})]})})};const ca=({item:a,deleteCartItems:s})=>e.jsxs("div",{className:"CartItemCard",children:[e.jsx(N,{to:`/product/${a.product}`,children:e.jsx("img",{src:a.image,alt:"ssa"})}),e.jsxs("div",{children:[e.jsx(N,{to:`/product/${a.product}`,children:a.name.substring(0,50)}),e.jsx("span",{children:`Price: ₹${a.price}`}),e.jsx("p",{onClick:()=>s(a.product),children:"Remove"})]})]}),la=()=>{const a=A(),s=D(),r=(i,m,l)=>{const u=m+1;l<=m||s(re({id:i,quantity:u}))},t=(i,m)=>{const l=m-1;1>=m||s(re({id:i,quantity:l}))},n=i=>{s(kr(i))},o=()=>{a("/login?redirect=shipping")},{cartItems:d}=f(i=>i.cart);return e.jsxs(e.Fragment,{children:[e.jsx(E,{title:"Cart"}),d.length===0?e.jsxs("div",{className:"emptyCart",children:[e.jsx(Is,{}),e.jsx($,{children:"No Product in Your Cart"}),e.jsx(N,{to:"/products",children:"View Products"})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"cartPage",children:[e.jsxs("div",{className:"cartHeader",children:[e.jsx("p",{children:"Product"}),e.jsx("p",{children:"Quantity"}),e.jsx("p",{children:"Subtotal"})]}),d&&d.map(i=>e.jsxs("div",{className:"cartContainer",children:[e.jsx(ca,{item:i,deleteCartItems:n}),e.jsxs("div",{className:"cartInput",children:[e.jsx("button",{onClick:()=>t(i.product,i.quantity),children:"-"}),e.jsx("input",{type:"number",value:i.quantity,readOnly:!0}),e.jsx("button",{onClick:()=>r(i.product,i.quantity,i.stock),children:"+"})]}),e.jsx("p",{className:"cartSubtotal",children:`₹${i.price*i.quantity}`})]},i.product)),e.jsxs("div",{className:"cartGrossProfit",children:[e.jsx("div",{}),e.jsxs("div",{className:"cartGrossProfitBox",children:[e.jsx("p",{children:"Gross Total"}),e.jsx("p",{children:`₹${d.reduce((i,m)=>i+m.quantity*m.price,0)}`})]}),e.jsx("div",{}),e.jsx("div",{className:"checkOutBtn",children:e.jsx("button",{onClick:o,children:"Check Out"})})]})]})})]})};const be=({activeStep:a})=>{const s=[{label:e.jsx($,{children:"Shipping Details"}),icon:e.jsx(Es,{})},{label:e.jsx($,{children:"Confirm Order"}),icon:e.jsx(Fs,{})},{label:e.jsx($,{children:"Payment"}),icon:e.jsx(Rs,{})}],r={boxSizing:"border-box"};return e.jsx(e.Fragment,{children:e.jsx($s,{alternativeLabel:!0,activeStep:a,style:r,children:s.map((t,n)=>e.jsx(Os,{active:a===n,completed:a>=n,children:e.jsx(Ds,{style:{color:a>=n?"tomato":"rgba(0, 0, 0, 0.649)"},icon:t.icon,children:t.label})},n))})})};const ua=()=>{const a=D(),s=A(),{shippingInfo:r}=f(p=>p.cart),[t,n]=c.useState(r.address),[o,d]=c.useState(r.city),[i,m]=c.useState(r.state),[l,u]=c.useState(r.country),[j,v]=c.useState(r.pinCode),[h,P]=c.useState(r.phoneNo),F=p=>{if(p.preventDefault(),h.length<10||h.length>10){y.error("Phone Number should be 10 digits Long");return}a(Tr({address:t,city:o,state:i,country:l,pinCode:j,phoneNo:h})),s("/order/confirm")};return e.jsxs(e.Fragment,{children:[e.jsx(E,{title:"Shipping Details"}),e.jsx(be,{activeStep:0}),e.jsx("div",{className:"shippingContainer",children:e.jsxs("div",{className:"shippingBox",children:[e.jsx("h2",{className:"shippingHeading",children:"Shipping Details"}),e.jsxs("form",{className:"shippingForm",encType:"multipart/form-data",onSubmit:F,children:[e.jsxs("div",{children:[e.jsx(As,{}),e.jsx("input",{type:"text",placeholder:"Address",required:!0,value:t,onChange:p=>n(p.target.value)})]}),e.jsxs("div",{children:[e.jsx(ks,{}),e.jsx("input",{type:"number",placeholder:"Pin Code",required:!0,value:j,onChange:p=>v(p.target.value)})]}),e.jsxs("div",{children:[e.jsx(Ts,{}),e.jsx("input",{type:"number",placeholder:"Phone Number",required:!0,value:h,onChange:p=>P(p.target.value),size:"10"})]}),e.jsxs("div",{children:[e.jsx(Us,{}),e.jsxs("select",{required:!0,value:l,onChange:p=>u(p.target.value),children:[e.jsx("option",{value:"",children:"Country"}),Ie&&Ie.getAllCountries().map(p=>e.jsx("option",{value:p.isoCode,children:p.name},p.isoCode))]})]}),l&&e.jsxs("div",{children:[e.jsx(_s,{}),e.jsxs("select",{required:!0,value:i,onChange:p=>m(p.target.value),children:[e.jsx("option",{value:"",children:"State"}),$e&&$e.getStatesOfCountry(l).map(p=>e.jsx("option",{value:p.isoCode,children:p.name},p.isoCode))]})]}),i&&e.jsxs("div",{children:[e.jsx(Bs,{}),e.jsxs("select",{required:!0,value:o,onChange:p=>d(p.target.value),children:[e.jsx("option",{value:"",children:"City"}),Oe&&Oe.getCitiesOfState(l,i).map(p=>e.jsx("option",{value:p.isoCode,children:p.name},p.isoCode))]})]}),e.jsx("input",{type:"submit",value:"Continue",className:"shippingBtn",disabled:!i})]})]})})]})};const pa=()=>{const a=A(),{shippingInfo:s,cartItems:r}=f(u=>u.cart),{user:t}=f(u=>u.user),n=r.reduce((u,j)=>u+j.quantity*j.price,0),o=n>1e3?0:200,d=n*.18,i=n+d+o,m=`${s.address}, ${s.city}, ${s.state}, ${s.pinCode}, ${s.country}`,l=()=>{const u={subtotal:n,shippingCharges:o,tax:d,totalPrice:i};sessionStorage.setItem("orderInfo",JSON.stringify(u)),a("/process/payment")};return e.jsxs(e.Fragment,{children:[e.jsx(E,{title:"Confirm Order"}),e.jsx(be,{activeStep:1}),e.jsxs("div",{className:"confirmOrderPage",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"confirmshippingArea",children:[e.jsx($,{children:"Shipping Info"}),e.jsxs("div",{className:"confirmshippingAreaBox",children:[e.jsxs("div",{children:[e.jsx("p",{children:"Name:"}),e.jsx("span",{children:t.name})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Phone:"}),e.jsx("span",{children:s.phoneNo})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Address:"}),e.jsx("span",{children:m})]})]})]}),e.jsxs("div",{className:"confirmCartItems",children:[e.jsx($,{children:"Your Cart Items:"}),e.jsx("div",{className:"confirmCartItemsContainer",children:r&&r.map(u=>e.jsxs("div",{children:[e.jsx("img",{src:u.image,alt:"Product"}),e.jsx(N,{to:`/product/${u.product}`,children:u.name.substring(0,50)}),e.jsxs("span",{children:[u.quantity," X ₹",u.price," =",e.jsxs("b",{children:["₹",u.price*u.quantity]})]})]},u.product))})]})]}),e.jsx("div",{children:e.jsxs("div",{className:"orderSummary",children:[e.jsx($,{children:"Order Summery"}),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("p",{children:"Subtotal:"}),e.jsxs("span",{children:["₹",n]})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Shipping Charges:"}),e.jsxs("span",{children:["₹",o]})]}),e.jsxs("div",{children:[e.jsx("p",{children:"GST:"}),e.jsxs("span",{children:["₹",d]})]})]}),e.jsxs("div",{className:"orderSummaryTotal",children:[e.jsx("p",{children:e.jsx("b",{children:"Total:"})}),e.jsxs("span",{children:["₹",i]})]}),e.jsx("button",{onClick:l,children:"Proceed To Payment"})]})})]})]})};const ma={isLoading:!1,order:null,err:null},as=B({name:"order",initialState:ma,reducers:{clearErrors:a=>{a.err=null},savingShipingInfo:(a,s)=>{a.shippingInfo=s.payload}},extraReducers:a=>{a.addCase(ue.pending,(s,r)=>{s.isLoading=!0}).addCase(ue.fulfilled,(s,r)=>{s.isLoading=!1,s.order=r.payload}).addCase(ue.rejected,(s,r)=>{s.isLoading=!1,s.err=r.payload})}}),ue=L("order/create",async(a,s)=>{try{const r={headers:{"Content-Type":"application/json"}},{data:t}=await I.post("/api/v1/order/new",a,r);return t}catch(r){return s.rejectWithValue(r.response.data.message?r.response.data.message:r.message)}}),{clearErrors:ha}=as.actions,ga=as.reducer,xa=()=>{const a=JSON.parse(sessionStorage.getItem("orderInfo")),s=A(),r=D(),t=nr(),n=or(),o=c.useRef(null),{shippingInfo:d,cartItems:i}=f(h=>h.cart),{user:m}=f(h=>h.user),{err:l}=f(h=>h.newOrder),u={amount:Math.round(a.totalPrice*100)},j={shippingInfo:d,orderItems:i,itemsPrice:a.subtotal,taxPrice:a.tax,shippingPrice:a.shippingCharges,totalPrice:a.totalPrice},v=async h=>{h.preventDefault(),o.current.disabled=!0;try{const P={headers:{"Content-Type":"application/json"}},{data:F}=await I.post("/api/v1/payment/process",u,P),p=F.client_secret;if(!t||!n)return;const{paymentIntent:S,error:R}=await t.confirmCardPayment(p,{payment_method:{card:n.getElement(De),billing_details:{name:m.name,email:m.email,address:{line1:d.address,city:d.city,state:d.state,postal_code:d.pinCode,country:d.country}}}});R?(o.current.disabled=!1,y.error(R.message)):S&&S.status==="succeeded"?(j.paymentInfo={id:S.id,status:S.status},r(ue(j)),s("/success")):alert.error("There's some issue while processing payment ")}catch(P){o.current.disabled=!1,y.error(P.response.data.message)}};return c.useEffect(()=>{l&&(y.error(l),r(ha()))},[l,r]),e.jsxs(e.Fragment,{children:[e.jsx(E,{title:"Confirm Order"}),e.jsx(be,{activeStep:2}),e.jsx("div",{className:"paymentContainer",children:e.jsxs("form",{className:"paymentForm",onSubmit:h=>v(h),children:[e.jsx($,{children:"Card Info"}),e.jsxs("div",{children:[e.jsx(Ws,{}),e.jsx(De,{className:"paymentInput"})]}),e.jsxs("div",{children:[e.jsx(Hs,{}),e.jsx(ir,{className:"paymentInput"})]}),e.jsxs("div",{children:[e.jsx(Te,{}),e.jsx(dr,{className:"paymentInput"})]}),e.jsx("input",{type:"submit",value:`Pay - ₹${a&&a.totalPrice}`,ref:o,className:"paymentFormBtn"})]})})]})};const ja=()=>e.jsxs("div",{className:"orderSuccess",children:[e.jsx(qs,{}),e.jsx($,{children:"Your Order has been Placed successfully "}),e.jsx(N,{to:"/orders",children:"View Orders"})]});const fa={orders:[],error:null,isLoading:!1},ts=B({name:"order",initialState:fa,reducers:{clearErrors:a=>{a.error=null}},extraReducers:a=>{a.addCase(pe.pending,(s,r)=>{s.isLoading=!0}).addCase(pe.fulfilled,(s,r)=>{s.isLoading=!1,s.orders=r.payload}).addCase(pe.rejected,(s,r)=>{s.isLoading=!1,s.error=r.payload})}}),pe=L("myOrders/get",async a=>{try{const{data:s}=await I.get("/api/v1/orders/me");return s.orders}catch(s){return a.rejectWithValue(s.response.data.message?s.response.data.message:s.message)}}),{clearErrors:va}=ts.actions,ya=ts.reducer,Ca=()=>{const a=D(),{isLoading:s,error:r,orders:t}=f(i=>i.myOrders),{user:n}=f(i=>i.user),o=[{field:"id",headerName:"Order ID",minWidth:300,flex:1},{field:"status",headerName:"Status",minWidth:150,flex:.5,cellClassName:i=>i.row.status==="Delivered"?"greenColor":"redColor"},{field:"itemsQty",headerName:"Items Qty",type:"number",minWidth:150,flex:.3},{field:"amount",headerName:"Amount",type:"number",minWidth:270,flex:.5},{field:"actions",flex:.3,headerName:"Actions",minWidth:150,type:"number",sortable:!1,renderCell:i=>e.jsx(N,{to:`/order/${i.row.id}`,children:e.jsx(Vs,{})})}],d=[];return c.useEffect(()=>{r?(y.error(r),a(va())):a(pe())},[a,r]),t&&t.forEach((i,m)=>{d.push({itemsQty:i.orderItems.length,id:i._id,status:i.orderStatus,amount:i.totalPrice})}),e.jsxs(e.Fragment,{children:[e.jsx(E,{title:`${n.name}'s Orders`}),s?e.jsx(T,{}):e.jsxs("div",{className:"myOrdersPage",children:[e.jsx(we,{rows:d,columns:o,pageSize:10,disableRowSelectionOnClick:!0,className:"myOrdersTable",autoHeight:!0}),e.jsx($,{id:"myOrdersHeading",children:`${n.name}'s Order`})]})]})};const Pa={order:[],error:null,isLoading:!1},ns=B({name:"order",initialState:Pa,reducers:{clearErrors:a=>{a.error=null}},extraReducers:a=>{a.addCase(X.pending,(s,r)=>{s.isLoading=!0}).addCase(X.fulfilled,(s,r)=>{s.isLoading=!1,s.order=r.payload}).addCase(X.rejected,(s,r)=>{s.isLoading=!1,s.error=r.payload})}}),X=L("order/getDetails",async(a,s)=>{try{const{data:r}=await I.get(`/api/v1/order/${a}`);return r.order}catch(r){return s.rejectWithValue(r.response.data.message?r.response.data.message:r.message)}}),{clearErrors:Se}=ns.actions,Sa=ns.reducer,wa=()=>{const{id:a}=M(),{order:s,error:r,isLoading:t}=f(o=>o.orderDetails),n=D();return c.useEffect(()=>{r?(y.error(r),n(Se())):n(X(a))},[n,r,a]),e.jsx(e.Fragment,{children:t?e.jsx(T,{}):e.jsxs(e.Fragment,{children:[e.jsx(E,{title:"Order Details"}),e.jsxs("div",{className:"orderDetailsPage",children:[e.jsxs("div",{className:"orderDetailsContainer",children:[e.jsxs($,{component:"h1",children:["Order #",s&&s._id]}),e.jsx($,{children:"Shipping Info"}),e.jsxs("div",{className:"orderDetailsContainerBox",children:[e.jsxs("div",{children:[e.jsx("p",{children:"Name:"}),e.jsx("span",{children:s.user&&s.user.name})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Phone:"}),e.jsx("span",{children:s.shippingInfo&&s.shippingInfo.phoneNo})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Address:"}),e.jsx("span",{children:s.shippingInfo&&`${s.shippingInfo.address}, ${s.shippingInfo.city}, ${s.shippingInfo.state}, ${s.shippingInfo.pinCode}, ${s.shippingInfo.country}`})]})]}),e.jsx($,{children:"Payment"}),e.jsxs("div",{className:"orderDetailsContainerBox",children:[e.jsx("div",{children:e.jsx("p",{className:s.paymentInfo&&s.paymentInfo.status==="succeeded"?"greenColor":"redColor",children:s.paymentInfo&&s.paymentInfo.status==="succeeded"?"PAID":"NOT PAID"})}),e.jsxs("div",{children:[e.jsx("p",{children:"Amount:"}),e.jsx("span",{children:s.totalPrice&&s.totalPrice})]})]}),e.jsx($,{children:"Order Status"}),e.jsx("div",{className:"orderDetailsContainerBox",children:e.jsx("div",{children:e.jsx("p",{className:s.orderStatus&&s.orderStatus==="Delivered"?"greenColor":"redColor",children:s.orderStatus&&s.orderStatus})})})]}),e.jsxs("div",{className:"orderDetailsCartItems",children:[e.jsx($,{children:"Order Items:"}),e.jsx("div",{className:"orderDetailsCartItemsContainer",children:s.orderItems&&s.orderItems.map(o=>e.jsxs("div",{children:[e.jsx("img",{src:o.image,alt:"Product"}),e.jsx(N,{to:`/product/${o.product}`,children:o.name})," ",e.jsxs("span",{children:[o.quantity," X ₹",o.price," ="," ",e.jsxs("b",{children:["₹",o.price*o.quantity]})]})]},o.product))})]})]})]})})};const Q=()=>e.jsxs("div",{className:"sidebar",children:[e.jsx(N,{to:"/",children:e.jsx("img",{src:Me,alt:"shopekart"})}),e.jsx(N,{to:"/admin/dashboard",children:e.jsxs("p",{children:[e.jsx(ke,{})," Dashboard"]})}),e.jsx(N,{children:e.jsx(Ms,{defaultCollapseIcon:e.jsx(Qs,{}),defaultExpandIcon:e.jsx(zs,{}),children:e.jsxs(Pe,{nodeId:"1",label:"Products",children:[e.jsx(N,{to:"/admin/products",children:e.jsx(Pe,{nodeId:"2",label:"All",icon:e.jsx(Js,{})})}),e.jsx(N,{to:"/admin/product",children:e.jsx(Pe,{nodeId:"2",label:"Create",icon:e.jsx(Gs,{})})})]})})}),e.jsx(N,{to:"/admin/orders",children:e.jsxs("p",{children:[e.jsx(Ae,{})," Orders"]})}),e.jsx(N,{to:"/admin/users",children:e.jsxs("p",{children:[e.jsx(Ks,{})," Users"]})}),e.jsx(N,{to:"/admin/reviews",children:e.jsxs("p",{children:[e.jsx(Ys,{})," Reviews"]})})]});const Na={orders:[],error:null,isLoading:!1,isUpdated:null,isDeleted:null},os=B({name:"order",initialState:Na,reducers:{clearErrors:a=>{a.error=null},updateOrderReset:a=>{a.isUpdated=null},deleteOrderReset:a=>{a.isDeleted=null}},extraReducers:a=>{a.addCase(Z.pending,(s,r)=>{s.isLoading=!0}).addCase(Z.fulfilled,(s,r)=>{s.isLoading=!1,s.orders=r.payload}).addCase(Z.rejected,(s,r)=>{s.isLoading=!1,s.error=r.payload}).addCase(me.pending,(s,r)=>{s.isLoading=!0}).addCase(me.fulfilled,(s,r)=>{s.isLoading=!1,s.isUpdated=r.payload}).addCase(me.rejected,(s,r)=>{s.isLoading=!1,s.error=r.payload}).addCase(ee.pending,(s,r)=>{s.isLoading=!0}).addCase(ee.fulfilled,(s,r)=>{s.isLoading=!1,s.isDeleted=r.payload}).addCase(ee.rejected,(s,r)=>{s.isLoading=!1,s.error=r.payload})}}),Z=L("getAllOrders/admin",async a=>{try{const{data:s}=await I.get("/api/v1/admin/orders");return s.orders}catch(s){return a.rejectWithValue(s.response.data.message?s.response.data.message:s.message)}}),me=L("updateOrder/Admin",async({id:a,myForm:s},r)=>{try{const t={headers:{"Content-Type":"application/json"}},{data:n}=await I.put(`/api/v1/admin/order/${a}`,s,t);return n.success}catch(t){return r.rejectWithValue(t.response.data.message?t.response.data.message:t.message)}}),ee=L("deleteOrder/Admin",async(a,s)=>{try{const{data:r}=await I.delete(`/api/v1/admin/order/${a}`);return r}catch(r){return s.rejectWithValue(r.response.data.message?r.response.data.message:r.message)}}),{clearErrors:ba,updateOrderReset:La,deleteOrderReset:Ia}=os.actions,$a=os.reducer;mr.register(hr,gr,xr,jr,fr,vr,yr,Cr);const Oa=()=>{const a=D(),{products:s}=f(i=>i.products),{orders:r}=f(i=>i.allOrders);let t=0;s&&s.forEach(i=>{i.Stock===0&&t++}),c.useEffect(()=>{a(G()),a(Z())},[a]);const n={labels:["Initial Amount","Amount Earned"],datasets:[{label:"TOTAL AMOUNT",backgroundColor:["tomato"],hoverBackgroundColor:["rgb(197, 72, 49)"],data:[0,4e3]}]},o={responsive:!0},d={labels:["Out of Stock","InStock"],datasets:[{backgroundColor:["#00A6B4","#6800B4"],hoverBackgroundColor:["#4B5000","#35014F"],data:[t,s.length-t]}]};return e.jsxs("div",{className:"dashboard",children:[e.jsx(Q,{}),e.jsxs("div",{className:"dashboardContainer",children:[e.jsx($,{variant:"h1",children:"Dashboard"}),e.jsxs("div",{className:"dashboardSummary",children:[e.jsx("div",{children:e.jsxs("p",{children:["Toatal Amount ",e.jsx("br",{})," ₹2000"]})}),e.jsxs("div",{className:"dashboardSummaryBox2",children:[e.jsxs(N,{to:"/admin/products",children:[e.jsx("p",{children:"product"}),e.jsx("p",{children:s==null?void 0:s.length})]}),e.jsxs(N,{to:"/admin/orders",children:[e.jsx("p",{children:"Orders"}),e.jsx("p",{children:r&&r.length})]}),e.jsxs(N,{to:"/admin/users",children:[e.jsx("p",{children:"Users"}),e.jsx("p",{children:"2"})]})]})]}),e.jsx("div",{className:"lineChart",children:e.jsx(ur,{options:o,data:n})}),e.jsx("div",{className:"doughnutChart",children:e.jsx(pr,{options:o,data:d})})]})]})};const Da={product:{},success:null,isLoading:!1,error:null,isDeleted:null,isUpdated:null},is=B({name:"product",initialState:Da,reducers:{clearErrors:a=>{a.error=null},newProductReset:a=>{a.success=null,a.isLoading=!1},deleteProductReset:a=>{a.isDeleted=null,a.isLoading=!1},updateProductReset:a=>{a.isUpdated=null,a.isLoading=!1}},extraReducers:a=>{a.addCase(he.pending,s=>{s.isLoading=!0}).addCase(he.fulfilled,(s,r)=>{s.success=r.payload.success,s.product=r.payload.product,s.isLoading=!1}).addCase(he.rejected,(s,r)=>{console.log(r.payload),s.error=r.payload,s.isLoading=!1}).addCase(ge.pending,s=>{s.isLoading=!0}).addCase(ge.fulfilled,(s,r)=>{s.success=r.payload.success,s.isLoading=!1,s.isDeleted=!0}).addCase(ge.rejected,(s,r)=>{console.log(r.payload),s.error=r.payload,s.isLoading=!1}).addCase(xe.pending,s=>{s.isLoading=!0}).addCase(xe.fulfilled,(s,r)=>{s.success=r.payload.success,s.isUpdated=!0,s.isLoading=!1}).addCase(xe.rejected,(s,r)=>{s.error=r.payload,s.isLoading=!1})}}),he=L("product/createProduct",async(a,s)=>{try{const r={headers:{"Content-Type":"application/json"}},{data:t}=await I.post("/api/v1/admin/product/new",a,r);return t}catch(r){return s.rejectWithValue(r.response.data.message?r.response.data.message:r.message)}}),ge=L("product/deleteProduct",async(a,s)=>{try{const{data:r}=await I.delete(`/api/v1/admin/product/${a}`);return r}catch(r){return s.rejectWithValue(r.response.data.message?r.response.data.message:r.message)}}),xe=L("product/updateProduct",async({productId:a,myForm:s},r)=>{console.log(a,s);try{const t={headers:{"Content-Type":"application/json"}},{data:n}=await I.put(`/api/v1/admin/product/${a}`,s,t);return n}catch(t){return r.rejectWithValue(t.response.data.message?t.response.data.message:t.message)}}),{clearErrors:ds,newProductReset:Ea,deleteProductReset:Fa,updateProductReset:Ra}=is.actions,Aa=is.reducer,ka=()=>{const a=D(),{isLoading:s,error:r,products:t}=f(l=>l.products),{error:n,isDeleted:o}=f(l=>l.product),d=l=>{a(ge(l))};c.useEffect(()=>{r&&(y.error(r),a(ve())),n&&(y.error(n),a(ve())),o&&(y.success("Product Deleted Successfully"),a(Fa())),a(G())},[a,r,o,n]);const i=[{field:"id",headerName:"Product ID",minWidth:200,flex:.5},{field:"name",headerName:"Name",minWidth:350,flex:1},{field:"stock",headerName:"Stock",type:"number",minWidth:150,flex:.3},{field:"price",headerName:"Price",type:"number",minWidth:270,flex:.5},{field:"actions",flex:.3,headerName:"Actions",minWidth:150,type:"number",sortable:!1,renderCell:l=>e.jsxs(e.Fragment,{children:[e.jsx(N,{to:`/admin/product/${l.row.id}`,children:e.jsx(_e,{})}),e.jsx(V,{onClick:()=>d(l.row.id),children:e.jsx(Be,{})})]})}],m=[];return t&&t.forEach(l=>m.push({id:l._id,stock:l.Stock,price:l.price,name:l.name})),e.jsx(e.Fragment,{children:s?e.jsx(T,{}):e.jsxs(e.Fragment,{children:[e.jsx(E,{title:"ALL Products -ADMIN"}),e.jsxs("div",{className:"dashboard",children:[e.jsx(Q,{}),e.jsxs("div",{className:"productListContainer",children:[e.jsx("h1",{id:"productListHeading",children:"ALL PRODUCTS"}),e.jsx(we,{rows:m,columns:i,pageSize:10,disableSelectionOnClick:!0,className:"productListTable",autoHeight:!0})]})]})]})})};const Ta=()=>{const a=D(),s=A(),{isLoading:r,error:t,success:n}=f(C=>C.product),o=["Laptop","Footwear","Bottom","Tops","Attire","Camera","SmartPhones"],[d,i]=c.useState(""),[m,l]=c.useState(0),[u,j]=c.useState(""),[v,h]=c.useState(""),[P,F]=c.useState(0),[p,S]=c.useState([]),[R,O]=c.useState([]),U=C=>{C.preventDefault();const g=new FormData;g.set("name",d),g.set("price",m),g.set("description",u),g.set("category",v),g.set("Stock",P),p.forEach(_=>{g.append("images",_)}),a(he(g))},q=C=>{const g=Array.from(C.target.files);S([]),O([]),g.forEach(_=>{const W=new FileReader;W.onload=()=>{W.readyState===2&&(O(b=>[...b,W.result]),S(b=>[...b,W.result]))},W.readAsDataURL(_)})};return c.useEffect(()=>{t&&(y.error(t),a(ds())),n&&(y.success("Product Created Successfully"),s("/admin/dashboard"),a(Ea()))},[a,t,n,s]),e.jsxs(e.Fragment,{children:[e.jsx(E,{title:"Create Product"}),e.jsxs("div",{className:"dashboard",children:[e.jsx(Q,{}),e.jsx("div",{className:"newProductContainer",children:e.jsxs("form",{className:"createProductForm",encType:"multipart/form-data",onSubmit:U,children:[e.jsx("h1",{children:"Create Product"}),e.jsxs("div",{children:[e.jsx(We,{}),e.jsx("input",{type:"text",placeholder:"Product Name",required:!0,value:d,onChange:C=>i(C.target.value)})]}),e.jsxs("div",{children:[e.jsx(He,{}),e.jsx("input",{type:"number",placeholder:"Price",required:!0,value:m,onChange:C=>l(C.target.value)})]}),e.jsxs("div",{children:[e.jsx(qe,{}),e.jsx("textarea",{placeholder:"Product Description",value:u,onChange:C=>j(C.target.value),cols:"30",rows:"1"})]}),e.jsxs("div",{children:[e.jsx(Ne,{}),e.jsxs("select",{onChange:C=>h(C.target.value),children:[e.jsx("option",{value:"",children:"Choose Category"}),o.map(C=>e.jsx("option",{value:C,children:C},C))]})]}),e.jsxs("div",{children:[e.jsx(Ve,{}),e.jsx("input",{type:"number",placeholder:"Stock",required:!0,value:P,onChange:C=>F(C.target.value)})]}),e.jsx("div",{id:"createProductFormFile",children:e.jsx("input",{type:"file",name:"avatar",accept:"image/*",onChange:q,multiple:!0})}),e.jsx("div",{id:"createProductFormImage",children:R.map((C,g)=>e.jsx("img",{src:C,alt:"Product Preview"},g))}),e.jsx(V,{id:"createProductBtn",type:"submit",disabled:!!r,children:"Create"})]})})]})]})};const Ua=()=>{const a=D(),s=A(),{id:r}=M(),{isLoading:t,error:n,isUpdated:o}=f(x=>x.product),{product:d,error:i}=f(x=>x.productDetails),m=["Laptop","Footwear","Bottom","Tops","Attire","Camera","SmartPhones"],[l,u]=c.useState(""),[j,v]=c.useState(0),[h,P]=c.useState(""),[F,p]=c.useState(""),[S,R]=c.useState(0),[O,U]=c.useState([]),[q,C]=c.useState([]),[g,_]=c.useState([]),W=x=>{x.preventDefault();const k=new FormData;k.set("name",l),k.set("price",j),k.set("description",h),k.set("category",F),k.set("Stock",S),O.forEach(ye=>{k.append("images",ye)}),a(xe({productId:r,myForm:k}))};c.useEffect(()=>{d&&r!==d._id?a(K(r)):(u(d.name),P(d.description),v(d.price),p(d.category),R(d.Stock),C(d.images)),n&&(y.error(n),a(ds())),o&&(y.success("Product Updated Successfully"),s("/admin/dashboard"),a(Ra()))},[a,n,o,s,d,r]);const b=x=>{const k=Array.from(x.target.files);U([]),_([]),C([]),k.forEach(ye=>{const z=new FileReader;z.onload=()=>{z.readyState===2&&(_(Ce=>[...Ce,z.result]),U(Ce=>[...Ce,z.result]))},z.readAsDataURL(ye)})};return e.jsxs(e.Fragment,{children:[e.jsx(E,{title:"Create Product"}),e.jsxs("div",{className:"dashboard",children:[e.jsx(Q,{}),e.jsx("div",{className:"newProductContainer",children:e.jsxs("form",{className:"createProductForm",encType:"multipart/form-data",onSubmit:W,children:[e.jsx("h1",{children:"Create Product"}),e.jsxs("div",{children:[e.jsx(We,{}),e.jsx("input",{type:"text",placeholder:"Product Name",required:!0,value:l,onChange:x=>u(x.target.value)})]}),e.jsxs("div",{children:[e.jsx(He,{}),e.jsx("input",{type:"number",placeholder:"Price",required:!0,value:j,onChange:x=>v(x.target.value)})]}),e.jsxs("div",{children:[e.jsx(qe,{}),e.jsx("textarea",{placeholder:"Product Description",value:h,onChange:x=>P(x.target.value),cols:"30",rows:"1"})]}),e.jsxs("div",{children:[e.jsx(Ne,{}),e.jsxs("select",{value:F,onChange:x=>p(x.target.value),children:[e.jsx("option",{value:"",children:"Choose Category"}),m.map(x=>e.jsx("option",{value:x,children:x},x))]})]}),e.jsxs("div",{children:[e.jsx(Ve,{}),e.jsx("input",{type:"number",placeholder:"Stock",required:!0,value:S,onChange:x=>R(x.target.value)})]}),e.jsx("div",{id:"createProductFormFile",children:e.jsx("input",{type:"file",name:"avatar",accept:"image/*",onChange:b,multiple:!0})}),e.jsx("div",{id:"createProductFormImage",children:q.map((x,k)=>e.jsx("img",{src:x.url,alt:"Product Preview"},k))}),e.jsx("div",{id:"createProductFormImage",children:g.map((x,k)=>e.jsx("img",{src:x,alt:"Product Preview"},k))}),e.jsx(V,{id:"createProductBtn",type:"submit",disabled:!!t,children:"Create"})]})})]})]})},_a=()=>{const a=D(),s=A(),{isLoading:r,error:t,orders:n,isDeleted:o}=f(l=>l.allOrders),d=l=>{a(ee(l))};c.useEffect(()=>{t&&(y.error(t),a(ba())),o&&(y.success("Order Deleted Successfully"),a(ee()),s("/admin/orders"),a(Ia())),a(Z())},[a,t,o,s]);const i=[{field:"id",headerName:"Order ID",minWidth:300,flex:1},{field:"status",headerName:"Status",minWidth:150,flex:.5,cellClassName:l=>l.row.status==="Delivered"?"greenColor":"redColor"},{field:"itemsQty",headerName:"Items Qty",type:"number",minWidth:150,flex:.3},{field:"amount",headerName:"Amount",type:"number",minWidth:270,flex:.5},{field:"actions",flex:.3,headerName:"Actions",minWidth:150,type:"number",sortable:!1,renderCell:l=>e.jsxs(e.Fragment,{children:[e.jsx(N,{to:`/admin/order/${l.row.id}`,children:e.jsx(_e,{})}),e.jsx(V,{onClick:()=>d(l.row.id),children:e.jsx(Be,{})})]})}],m=[];return n&&n.forEach(l=>m.push({id:l._id,itemsQty:l.orderItems.length,amount:l.totalPrice,status:l.orderStatus})),e.jsxs(e.Fragment,{children:[e.jsx(E,{title:"ALL ORDERS -ADMIN"}),e.jsxs("div",{className:"dashboard",children:[e.jsx(Q,{}),e.jsxs("div",{className:"productListContainer",children:[e.jsx("h1",{id:"productListHeading",children:"ALL PRODUCTS"}),e.jsx(we,{rows:m,columns:i,pageSize:10,disableSelectionOnClick:!0,className:"productListTable",autoHeight:!0})]})]})]})},Ba=()=>{const{id:a}=M(),s=D(),{order:r,error:t,isLoading:n}=f(u=>u.orderDetails),{error:o,isUpdated:d}=f(u=>u.allOrders),[i,m]=c.useState(""),l=u=>{u.preventDefault();const j=new FormData;j.set("status",i),s(me({id:a,myForm:j}))};return c.useEffect(()=>{d&&(y.success("Order Updated Successfully"),s(La())),o&&(alert.error(o),s(Se())),t?(y.error(t),s(Se())):s(X(a))},[s,t,a,o,d]),e.jsx(e.Fragment,{children:n?e.jsx(T,{}):e.jsxs(e.Fragment,{children:[e.jsx(E,{title:"Process Order"}),e.jsxs("div",{className:"dashboard",children:[e.jsx(Q,{}),e.jsxs("div",{className:"confirmOrderPage",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"confirmshippingArea",children:[e.jsx($,{children:"Shipping Info"}),e.jsxs("div",{className:"orderDetailsContainerBox",children:[e.jsxs("div",{children:[e.jsx("p",{children:"Name:"}),e.jsx("span",{children:r.user&&r.user.name})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Phone:"}),e.jsx("span",{children:r.shippingInfo&&r.shippingInfo.phoneNo})]}),e.jsxs("div",{children:[e.jsx("p",{children:"Address:"}),e.jsx("span",{children:r.shippingInfo&&`${r.shippingInfo.address}, ${r.shippingInfo.city}, ${r.shippingInfo.state}, ${r.shippingInfo.pinCode}, ${r.shippingInfo.country}`})]})]})]}),e.jsxs("div",{className:"orderDetailsCartItems",children:[e.jsx($,{children:"Payment"}),e.jsxs("div",{className:"orderDetailsContainerBox",children:[e.jsx("div",{children:e.jsx("p",{className:r.paymentInfo&&r.paymentInfo.status==="succeeded"?"greenColor":"redColor",children:r.paymentInfo&&r.paymentInfo.status==="succeeded"?"PAID":"NOT PAID"})}),e.jsxs("div",{children:[e.jsx("p",{children:"Amount:"}),e.jsx("span",{children:r.totalPrice&&r.totalPrice})]})]}),e.jsx($,{children:"Order Status"}),e.jsx("div",{className:"orderDetailsContainerBox",children:e.jsx("div",{children:e.jsx("p",{className:r.orderStatus&&r.orderStatus==="Delivered"?"greenColor":"redColor",children:r.orderStatus&&r.orderStatus})})}),e.jsx($,{children:"Order Items:"}),e.jsx("div",{className:"orderDetailsCartItemsContainer",children:r.orderItems&&r.orderItems.map(u=>e.jsxs("div",{children:[e.jsx("img",{src:u.image,alt:"Product"}),e.jsx(N,{to:`/product/${u.product}`,children:u.name})," ",e.jsxs("span",{children:[u.quantity," X ₹",u.price," ="," ",e.jsxs("b",{children:["₹",u.price*u.quantity]})]})]},u.product))})]})]}),e.jsx("div",{style:{display:r.orderStatus==="Delivered"?"none":"block"},children:e.jsxs("form",{className:"updateOrderForm",onSubmit:l,children:[e.jsx("h1",{children:"Process Order"}),e.jsxs("div",{children:[e.jsx(Ne,{}),e.jsxs("select",{onChange:u=>m(u.target.value),children:[e.jsx("option",{value:"",children:"Choose Category"}),r.orderStatus==="Processing"&&e.jsx("option",{value:"Shipped",children:"Shipped"}),r.orderStatus==="Shipped"&&e.jsx("option",{value:"Delivered",children:"Delivered"})]})]}),e.jsx(V,{id:"createProductBtn",type:"submit",disabled:n?!0:i==="",children:"Process"})]})})]})]})]})})},Wa=()=>e.jsx("div",{children:"UsersList"});function Ha(){const a=D(),{user:s,isAuthenticated:r}=f(d=>d.user),[t,n]=c.useState("");async function o(){const{data:d}=await I.get("/api/v1/stripeapikey");n(d.stripeApiKey)}return c.useEffect(()=>{a(Y()),o()},[a,t]),e.jsxs(xs,{children:[e.jsx(Sr,{}),r&&e.jsx(Zr,{user:s}),e.jsxs(ar,{children:[e.jsx(w,{path:"/",element:e.jsx($r,{})}),e.jsx(w,{path:"/product/:id",element:e.jsx(Mr,{})}),e.jsx(w,{path:"/products",element:e.jsx(Ee,{})}),e.jsx(w,{path:"/products/:keyword",element:e.jsx(Ee,{})}),e.jsx(w,{path:"/search",element:e.jsx(zr,{})}),e.jsx(w,{path:"/login",element:e.jsx(Yr,{})}),e.jsx(w,{path:"/cart",element:e.jsx(la,{})}),e.jsx(w,{path:"/password/forgot",element:e.jsx(ia,{})}),e.jsx(w,{path:"/password/reset/:token",element:e.jsx(da,{})}),e.jsxs(w,{path:"/",element:e.jsx(H,{}),children:[e.jsx(w,{path:"/account",element:e.jsx(Xr,{})}),e.jsx(w,{path:"/me/update",element:e.jsx(ra,{})}),e.jsx(w,{path:"/password/update",element:e.jsx(aa,{})}),e.jsx(w,{path:"/shipping",element:e.jsx(ua,{})}),e.jsx(w,{path:"/order/confirm",element:e.jsx(pa,{})}),e.jsx(w,{path:"/success",element:e.jsx(ja,{})}),e.jsx(w,{path:"/orders",element:e.jsx(Ca,{})}),e.jsx(w,{path:"/order/:id",element:e.jsx(wa,{})}),t&&e.jsx(w,{path:"/process/payment",element:e.jsx(cr,{stripe:lr(t),children:e.jsx(xa,{})})})]}),e.jsx(w,{path:"/admin/dashboard",element:e.jsx(H,{isAdmin:!0,children:e.jsx(Oa,{})})}),e.jsx(w,{path:"/admin/products",element:e.jsx(H,{isAdmin:!0,children:e.jsx(ka,{})})}),e.jsx(w,{path:"/admin/product",element:e.jsx(H,{isAdmin:!0,children:e.jsx(Ta,{})})}),e.jsx(w,{path:"/admin/product/:id",element:e.jsx(H,{isAdmin:!0,children:e.jsx(Ua,{})})}),e.jsx(w,{path:"/admin/orders",element:e.jsx(H,{isAdmin:!0,children:e.jsx(_a,{})})}),e.jsx(w,{path:"/admin/order/:id",element:e.jsx(H,{isAdmin:!0,children:e.jsx(Ba,{})})}),e.jsx(w,{path:"/admin/users",element:e.jsx(H,{isAdmin:!0,children:e.jsx(Wa,{})})})]}),e.jsx(br,{}),e.jsx(ls,{toastOptions:{style:{fontFamily:"Open Sans"}}})]})}const qa=er({reducer:{products:Ir,productDetails:Er,user:Kr,profile:sa,forgotPassword:oa,cart:Br,newOrder:ga,myOrders:ya,orderDetails:Sa,newReview:Vr,product:Aa,allOrders:$a}});cs.createRoot(document.getElementById("root")).render(e.jsx(Fe.StrictMode,{children:e.jsx(Zs,{store:qa,children:e.jsx(Ha,{})})}));
